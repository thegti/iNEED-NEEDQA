
 <div class="page-layout simple fullwidth bgstring" fxLayout="column"> 
    <div class="banner-content" fxLayout="column" fxLayoutAlign="center center" 
    fxLayout.gt-md="row" fxLayout.gt-sm="row" fxLayout.gt-xs="row">
    
     <div [hidden]="!next"  class="banner-lft">
         <h1>i need</h1>
 <mat-horizontal-stepper >
    <mat-step [stepControl]="firstFormGroup">
      <form [formGroup]="firstFormGroup" >


          <!-- <div >
              <button type="button"  (click)="EnabletestButton()" >
                 test
               </button>
               </div> -->


            <div fxLayout="row" fxLayoutAlign="start " fxFlex="1 0 auto" class="h29" tab-index=1>
                    <mat-label> </mat-label>
                    <mat-radio-group>
                        <mat-radio-button  value="1" formControlName="rdbProduct" checked (change)="selectSearch($event)"> product</mat-radio-button>
                        <mat-radio-button  value="2" formControlName="rdbService" (change)="selectSearch($event)">service</mat-radio-button>
                    </mat-radio-group>
            </div>
            <div fxLayout="row" fxLayoutAlign="start " fxFlex="1 0 auto" class="h43" tab-index=2>
                <mat-label>search</mat-label>
              <mat-form-field appearance="outline">
                       <mat-select formControlName="ddlsearch"    #singleSelect placeholder="search"   (selectionChange)="onKeyWordSelect()"  [ngClass]="{ 'is-invalid': ddlsearchvalid.ddlsearch.touched && ddlsearchvalid.ddlsearch.errors }" >
                          <ngx-mat-select-search [formControl]="searchFilterCtrl" [placeholderLabel]="'search keyword...'"  [noEntriesFoundLabel]="'no matching member found'"></ngx-mat-select-search>
                          <mat-option *ngFor="let member of filteredSearch | async" [value]="member['VKW_PK']">
                                {{member['VKW_KWORD']  }}
                              </mat-option>
                          
                  </mat-select>
                  <!-- <mat-error *ngIf="firstFormGroup.controls.ddlsearch.errors?.required && firstFormGroup.controls.ddlsearch.touched" >
                    Select Keyword
                  </mat-error> -->


                  <mat-error *ngIf="ddlsearchvalid.ddlsearch.errors && ddlsearchvalid.ddlsearch.touched" class="invalid-feedback">
                      <mat-error *ngIf="ddlsearchvalid.ddlsearch.errors.required">select keyword</mat-error>
                    
                      </mat-error>

              </mat-form-field>        
          </div>

            <div fxLayout="row" fxLayoutAlign="start " fxFlex="1 0 auto" class="h35" tab-index=3>
                    <mat-label>from</mat-label>
                    <mat-radio-group>
                    <mat-radio-button value="1"  formControlName="rdbQatar" checked (change)="selectLocation($event)" >qatar</mat-radio-button>
                    <mat-radio-button value="2" formControlName="rdbOutsideQatar" (change)="selectLocation($event)" >outside qatar</mat-radio-button>
                </mat-radio-group>
                   
        </div>

        <div fxLayout="row" fxLayoutAlign="start " fxFlex="1 0 auto " class="h45 "  tab-index=4>   
            <mat-label >name</mat-label> 
           <mat-form-field appearance="outline" fxFlex="50" >
              
            <input matInput type="text" formControlName="txtName" placeholder="name" maxlength="30" autocomplete="off" [ngClass]="{ 'is-invalid': txtNamevalid.txtName.touched && txtNamevalid.txtName.errors }"  >
            <!-- <mat-error *ngIf="firstFormGroup.controls.txtName.errors?.required && firstFormGroup.controls.txtName.touched" >
                enter name
              </mat-error> -->
            
                  <mat-error *ngIf="txtNamevalid.txtName.errors && txtNamevalid.txtName.touched" class="invalid-feedback">
                      <mat-error *ngIf="txtNamevalid.txtName.errors.required">enter name</mat-error>
                      <mat-error *ngIf="txtNamevalid.txtName.errors">
                          enter valid name (minimum 3 letters) 
                        </mat-error>
                      <!-- <mat-error *ngIf="txtName.errors.required">
                   enter name 
                </mat-error> -->
                <!-- <mat-error *ngIf="txtName.errors.minLength">
                  enter valid name 
                </mat-error> -->
              </mat-error>
        </mat-form-field>
    </div> 
       
        <div fxLayout="row" fxLayoutAlign="start " fxFlex="1 0 auto" class="h45" tab-index=5>   
                 <mat-label >email</mat-label>  
                 <mat-form-field appearance="outline" fxFlex="50" >
                 <input matInput type="text" formControlName="txtEmail" maxlength="30"  class="form-control" placeholder="email" maxlength="50" autocomplete="off" [ngClass]="{ 'is-invalid': validation.txtEmail.touched && validation.txtEmail.errors }" >

                 <!-- <mat-error *ngIf="validation.txtMobile.hasError('required')">Field must not be empty.</mat-error>
                 <mat-error *ngIf="!validation.txtMobile.hasError('required')">E-Mail is invalid.</mat-error> -->

                 <mat-error *ngIf="validation.txtEmail.errors && validation.txtEmail.touched" class="invalid-feedback">
                  <mat-error *ngIf="validation.txtEmail.errors.required">email is required</mat-error>
                 <mat-error *ngIf="validation.txtEmail.errors.email&& validation.txtEmail.errors"  >enter valid email address</mat-error> 
                 </mat-error> 
                   
                    </mat-form-field>
                 <!-- <mat-error *ngIf="firstFormGroup.controls.txtEmail.errors?.required && firstFormGroup.controls.txtEmail.touched" >
                 enter valid email id
               </mat-error> -->
              
         </div> 
         
         <!-- <div fxLayout="row" fxLayoutAlign="start " fxFlex="1 0 auto" class="h45" tab-index=6> 
                <mat-label>phone</mat-label>
                    <mat-form-field appearance="outline" fxFlex="50" class="phon-input"> 
                        <div class="static-lbl">
                            <label>+974</label>
                         </div>              
                        <input matInput  type="text"  formControlName="txtMobile" placeholder="number" autocomplete="off"  required >
                        <mat-error *ngIf="firstFormGroup.controls.txtMobile.errors?.required && firstFormGroup.controls.txtMobile.touched" >
                            enter mobile no.
                          </mat-error>
                       </mat-form-field>
                 
             </div> 
             -->
             <div fxLayout="row" fxLayoutAlign="start " fxFlex="1 0 auto" class="h45" tab-index=6 > 
                <mat-label>phone</mat-label>
                    <mat-form-field appearance="outline" fxFlex="50" class="phon-input"> 
                        <div class="static-lbl">
                            <label>+974</label>
                         </div>              
                        <input matInput  type="text"  formControlName="txtMobile" placeholder="number" autocomplete="off" (keypress)="numericOnly($event)" maxlength="8" [ngClass]="{ 'is-invalid': mobilevalid.txtMobile.touched && mobilevalid.txtMobile.errors }"  >
                        <mat-error *ngIf= "mobilevalid.txtMobile.errors && mobilevalid.txtMobile.touched" class="invalid-feedback">
                            <mat-error *ngIf="mobilevalid.txtMobile.errors.required">
                               enter mobile number 
                            </mat-error>
                            <mat-error *ngIf="mobilevalid.txtMobile.errors.pattern">
                              enter valid mobile number 
                            </mat-error>
                          </mat-error>
                       </mat-form-field>
                 
             </div> 
        <div fxLayout="row" fxLayoutAlign="start " fxFlex="1 0 auto" class="h45" tab-index=7>
            <mat-label>your location</mat-label>
          <mat-form-field appearance="outline">
                   <mat-select formControlName="ddllocation"  #singleSelect placeholder="location"  [ngClass]="{ 'is-invalid': ddllocationvalid.ddllocation.touched && ddllocationvalid.ddllocation.errors }" >
                      <ngx-mat-select-search [formControl]="locationFilterCtrl" [placeholderLabel]="'search location...'"  [noEntriesFoundLabel]="'no matching member found'"></ngx-mat-select-search>
                      <mat-option *ngFor="let member of filteredLocation | async" [value]="member['CON_PK']">
                            {{member['CON_NAME']  }}
                          </mat-option>
              </mat-select>
              <!-- <mat-error *ngIf="firstFormGroup.controls.ddllocation.errors?.required && firstFormGroup.controls.ddllocation.touched" >
                select location
              </mat-error> -->
              <mat-error *ngIf="ddllocationvalid.ddllocation.errors && ddllocationvalid.ddllocation.touched" class="invalid-feedback">
                  <mat-error *ngIf="ddllocationvalid.ddllocation.errors.required">select keyword</mat-error>
                
                  </mat-error>
          </mat-form-field>        
      </div>

<div fxLayout="row" fxLayoutAlign="start " fxFlex="1 0 auto" class="h45" tab-index=8> 
        <mat-label></mat-label>
     <!-- <mat-form-field appearance="outline" fxFlex="50" class="min-max20">
         <input matInput  type="text"  formControlName="txtOTP" placeholder="otp" >
         <mat-error *ngIf="firstFormGroup.controls.txtOTP.errors?.required && firstFormGroup.controls.txtOTP.touched" >
          enter otp
        </mat-error>
     </mat-form-field> 
     <mat-label  class="otp-err"></mat-label> -->
      <div class="btn-container txt-h" >
     <button mat-raised-button  [disabled]="firstFormGroup.invalid" (click)="EnableNextButton()"  [ngClass]="{
        'prev': isFirst,
        'next': !isFirst
      }"   color="accent">
        next
      </button>
      </div>
    </div> 
      </form>
    </mat-step>
  </mat-horizontal-stepper>
    </div>

<!------- Submit Section ------->
    <div [hidden]="next" class="banner-lft" >
            <h1>i need</h1>
            <mat-horizontal-stepper >
                    <mat-step [stepControl]="secondFormGroup">
                      <form [formGroup]="secondFormGroup" >
                         
                            <div fxLayout="row" fxLayoutAlign="start " fxFlex="1 0 auto" tab-index=9>
                                    <mat-label> </mat-label>
                                    <mat-radio-group>  
                                        <mat-radio-button  value="1"  checked (change)="selectUseTypes($event)">personal use</mat-radio-button>
                                        <mat-radio-button  value="2"  (change)="selectUseTypes($event)">business use</mat-radio-button>
                                    </mat-radio-group>
                            </div>

                        

        <div fxLayout="row" fxLayoutAlign="start " fxFlex="1 0 auto" tab-index=10> 
                <mat-label>search</mat-label>
            <mat-form-field appearance="outline" fxFlex="50">
                <input matInput  type="text"  formControlName="txtSearch" placeholder="keyword"  [value]= this.selectedText readonly>
            </mat-form-field>
            </div> 
    <div fxLayout="row" fxLayoutAlign="start " fxFlex="1 0 auto" tab-index=11> 
            <mat-label>qty.</mat-label>
        <mat-form-field appearance="outline" fxFlex="50" class="min-max28-5">
            <input matInput  type="text" min="0" formControlName="txtQuantity" maxlength="5" placeholder="qty" class="quantitynumber" (keypress)="numericOnly($event)"  >
            <mat-error *ngIf="secondFormGroup.controls.txtQuantity.errors?.required && secondFormGroup.controls.txtQuantity.touched" >
                enter quantity
              </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" fxFlex="50" class="min-max28-5" tab-index=12>
    
                <mat-select  formControlName="ddlUnit"  placeholder="unit" >
                    <mat-option *ngFor="let type of unitOfMeasure"  [value]="type['UOM_PK']">
                        {{type['UOM_NAME']  }}
                  </mat-option> 
                </mat-select> 
                <mat-error *ngIf="secondFormGroup.controls.ddlUnit.errors?.required && secondFormGroup.controls.ddlUnit.touched" >
                    select uom
                  </mat-error>
              </mat-form-field>
        </div> 

                   <div fxLayout="row" fxLayoutAlign="start " fxFlex="1 0 auto" tab-index=13> 
                        <mat-label>approximate value</mat-label>
                    <mat-form-field appearance="outline" fxFlex="50">
                        <input matInput  type="type" min="0" formControlName="txtApproximate" class="quantitynumber" maxlength="8"  placeholder="approximate value" (keypress)="numericOnly($event)"  >
                    </mat-form-field>
                    </div> 

          
                   <div fxLayout="row" fxLayoutAlign="start " fxFlex="1 0 auto" tab-index=-14 class="h95">  
                        <mat-label>description</mat-label> 
                        <mat-form-field  class="enquiry-textarea" appearance="outline" fxFlex="50"  >
                         <textarea matInput  type="text"  formControlName="txtdDescription"
                         placeholder="brief description" name="desc" class="desc-textarea" ></textarea>
                        </mat-form-field>
                 </div>

                 <div fxLayout="row"  fxFlex="1 0 auto" class="formakingdynamic">   
                               <mat-label>attachments, if any<br><span class="attach-lbl">(max. file size 1mb)</span></mat-label>
                               <input type="file" #profilepic  formControlName="photo" (change)="onSelectionchange($event)" (change)="detectFiles($event)" style="display:none">
                               <button type="button"  class="browse-btn" (click)="profilepic.click()"> browse</button>
                               <div class="brows-lbl" [hidden]="!filenames"> {{ fileName }} </div>                              
                              
                    </div>  

                    <div class="w87per txt-rgt">
                            <button *ngIf="!enableClose" mat-raised-button  [disabled]="firstFormGroup.invalid || secondFormGroup.invalid" (click)="enquirySubmit()"  class="activate-btn" >submit</button>
                       </div>
                       </form>
                       </mat-step>
                       </mat-horizontal-stepper>
                    </div>  
                       <div class="form-errors-ymodel mr-24 mb-24 banner-rgt" fxLayout="column" 
                       fxLayoutAlign="center center" fxFlex="0.5 0 auto" >
                           <img src="assets/home/time-quality.png">
                      </div>
               
            </div>  
                <div class="toggle-btn "> 
                  <button [ngClass]="{ 'prev': isFirst,'next': !isFirst  }"  (click)="buttonNext()" ></button>
                  <button [disabled]="firstFormGroup.invalid"  [ngClass]="{ 'next': isFirst,'prev': !isFirst}" (click)="buttonPrevious()"  ></button>
                      </div> 

                    
</div>



                         
   
             
